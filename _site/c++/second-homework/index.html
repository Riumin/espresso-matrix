<!DOCTYPE html>
<html>

<head>
    <title>A Brief Analysis of the Second Homework</title>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="keywords" content="A Brief Analysis of the Second Homework, C++, Windows,cmd,C++,code,homework, Evergreen of Hall" />
    <meta name="description" content="A Brief Analysis of the Second Homework, C++, Windows,cmd,C++,code,homework, " />
    <meta name="theme-color" content="#2CA6CB"/>
    <link rel="shortcut icon" type="image/x-icon" media="screen" href="http://localhost:4000/favicon.ico" />
    <link rel="canonical" href="http://localhost:4000/c++/second-homework/" />
    <link rel="alternate" type="application/rss+xml" title="Evergreen of Hall" href="http://localhost:4000/feed.xml"  />
    <link rel="stylesheet" href="https://cdn.bootcss.com/bootstrap/3.3.0/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="https://cdn.bootcss.com/octicons/3.5.0/octicons.min.css" >
    <link rel="stylesheet" type="text/css" href="http://localhost:4000/static/css/style.css" />
    <link rel="stylesheet" type="text/css" href="http://localhost:4000/static/css/highlight.css" />
    <link rel="stylesheet" type="text/css" href="http://localhost:4000/static/css/gitment.css" />
    <link rel="stylesheet" type="text/css" href="http://localhost:4000/static/css/post.css" />
    




</head>


<body>

    <header>
        <nav class="navbar navbar-tiffany rectangle" role="navigation">
            <div class="container">
                <div class="navbar-header">
                    <img src="http://localhost:4000/sign.svg" height="54px" width="40.5px"/>
                    <a class="navbar-brand" href="http://localhost:4000/">Evergreen of Hall</a>
                    <p class="navbar-text"></p>

                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    
                </div>
                <div class="collapse navbar-collapse">
                    <ul class="nav navbar-nav navbar-right">
                        
                        <li>
                        <a href="http://localhost:4000/" class="word-keep"><span class="octicon octicon-book"></span></span>&nbsp;&nbsp;Blog</a>
                        </li>
                        
                        
                        <li>
                            <a href="http://localhost:4000/archive/" class="word-keep"><span class="octicon octicon-repo"></span>&nbsp;&nbsp;Archive</a>
                        </li>
                        
                        
                        
                        <li>
                            <a href="http://localhost:4000/category/" class="word-keep"><span class="octicon octicon-list-unordered"></span>&nbsp;&nbsp;Category</a>
                        </li>
                        
                        
                        
                        <li>
                            <a href="http://localhost:4000/tags/" class="word-keep"><span class="octicon octicon-tag"></span>&nbsp;&nbsp;Tag</a>
                        </li>
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        
                        <li><a href="#stq=" class="search-button"><span class="octicon octicon-search"></span></a></li>
                    </ul>
                </div>
            </div>
        </nav>
    </header>



<div class="main">
    <div class="container">
        <div class="row">
    <div class="content col-lg-9">
        <div class="sheet post">
          <header>
            <h2>A Brief Analysis of the Second Homework</h2>
            <p class="post-meta">
                <span class="octicon octicon-clock"></span> Feb 26, 2019
            </p>
            <p class="post-tag">
                <span><a href="http://localhost:4000/category/#C++"><span class="octicon octicon-list-unordered"></span>&nbsp;C++</a></span>
                <span>
                    <a class="word-keep" href="http://localhost:4000/tags/#Windows"><span class="octicon octicon-tag"></span>&nbsp;Windows</a>
                    
                    <a class="word-keep" href="http://localhost:4000/tags/#cmd"><span class="octicon octicon-tag"></span>&nbsp;cmd</a>
                    
                    <a class="word-keep" href="http://localhost:4000/tags/#C++"><span class="octicon octicon-tag"></span>&nbsp;C++</a>
                    
                    <a class="word-keep" href="http://localhost:4000/tags/#code"><span class="octicon octicon-tag"></span>&nbsp;code</a>
                    
                    <a class="word-keep" href="http://localhost:4000/tags/#homework"><span class="octicon octicon-tag"></span>&nbsp;homework</a>
                    
                </span>
            </p>
          </header>
          <hr class="boundary">
          <article>
            <ul id="markdown-toc">
  <li><a href="#task" id="markdown-toc-task">Task</a></li>
  <li><a href="#analysis" id="markdown-toc-analysis">Analysis</a>    <ul>
      <li><a href="#from-the-very-beginning" id="markdown-toc-from-the-very-beginning">From the Very Beginning</a></li>
      <li><a href="#restart-with-oop-thought-to-create-a-scheme" id="markdown-toc-restart-with-oop-thought-to-create-a-scheme">Restart with OOP Thought: To Create a <code class="highlighter-rouge">Scheme</code></a></li>
      <li><a href="#to-develop-a-plug-with-scheme" id="markdown-toc-to-develop-a-plug-with-scheme">To Develop a <code class="highlighter-rouge">Plug</code> with <code class="highlighter-rouge">Scheme</code></a></li>
      <li><a href="#practice-to-test-plug-in-main" id="markdown-toc-practice-to-test-plug-in-main">Practice: to Test <code class="highlighter-rouge">plug</code> in <code class="highlighter-rouge">main</code></a></li>
    </ul>
  </li>
</ul>

<blockquote>
  <p>Original guidance: https://github.com/guyaqi/backups/tree/master/notes cpp1-2.md ~ cpp1-5.md</p>
</blockquote>

<h1 id="task">Task</h1>

<blockquote>
  <p>作业:设计一个改变控制台配色的程序，预先搭配好三五个配色，在执行程序的时候可以随时切换，要求使用方向键进行控制，界面看起来就像这样。</p>
</blockquote>

<pre><code class="language-cassandraql">
----------------------------------



            Colors
        1. White &amp; Green
    -&gt;  2. Red &amp; Grey
        3. White &amp; Black
        4. White &amp; Blue

       This is a test text.

----------------------------------
</code></pre>
<p>箭头可以使用方向键控制，并且可以切换到指定的配色。</p>

<p>最好选项就用那个选项指示的配色显示，这样看起来更直观。</p>

<h1 id="analysis">Analysis</h1>

<h2 id="from-the-very-beginning">From the Very Beginning</h2>

<p>As for the case above, there are some apparent elements deserve attention.</p>

<ul>
  <li>a constant displayed window</li>
  <li>a movable sign over each option</li>
  <li>changeable pre-designed along with the switch of options</li>
</ul>

<p>It’s of certainty you could just combine all those factors above simply. Create four <code class="highlighter-rouge">char</code> array (‘cause <code class="highlighter-rouge">std::string</code> cannot be accepted by the function <code class="highlighter-rouge">system</code> as a parameter), set a whole framework of logical branches, fresh the display when necessary - a certain key pressed - and launch <code class="highlighter-rouge">system</code> syntax to change the color scheme of the present console. All those realization can be as simple as the following case:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// This tiny program works more like a plug which onced include a certain heading file works along with the main program</span>
<span class="c1">// To display it well, an additional main function will be provided</span>

<span class="cp">#include &lt;Windows.h&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;iostream&gt;
</span>
<span class="kt">void</span> <span class="nf">plug</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="kt">char</span> <span class="n">window</span><span class="p">[</span><span class="mi">173</span><span class="p">]</span> <span class="o">=</span> <span class="s">"-----------------------</span><span class="se">\n\n</span><span class="s"> Choose a color scheme</span><span class="se">\n\n</span><span class="s">   white &amp; green</span><span class="se">\n</span><span class="s">   red &amp; grey</span><span class="se">\n</span><span class="s">   white &amp; black (default)</span><span class="se">\n</span><span class="s">   while &amp; blue</span><span class="se">\n\n</span><span class="s">   Press A to quit   </span><span class="se">\n\n</span><span class="s">-----------------------</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>
<span class="n">COORD</span> <span class="n">ptr</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span><span class="mi">6</span> <span class="p">};</span>
<span class="kt">char</span> <span class="n">scheme</span><span class="p">[][</span><span class="mi">64</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="s">"color 72"</span><span class="p">,</span>
	<span class="s">"color 48"</span><span class="p">,</span>
	<span class="s">"color 70"</span><span class="p">,</span>
	<span class="s">"color 71"</span>
<span class="p">};</span>
<span class="n">CONSOLE_CURSOR_INFO</span> <span class="n">null_cursor</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">100</span><span class="p">,</span><span class="nb">false</span> <span class="p">};</span>
<span class="n">HANDLE</span> <span class="n">handle</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">plug</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
	<span class="n">system</span><span class="p">(</span><span class="s">"cls"</span><span class="p">);</span>
	<span class="n">SetConsoleCursorPosition</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span><span class="mi">0</span> <span class="p">});</span>
	<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">window</span><span class="p">;</span>
	<span class="n">SetConsoleCursorPosition</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">ptr</span><span class="p">);</span>
	<span class="n">putchar</span><span class="p">(</span><span class="err">'</span><span class="o">-&gt;</span><span class="err">'</span><span class="p">);</span>

	<span class="k">while</span> <span class="p">(</span><span class="nb">true</span><span class="p">)</span> <span class="p">{</span>

		<span class="k">if</span> <span class="p">(</span><span class="n">GetKeyState</span><span class="p">(</span><span class="mh">0x41</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">GetKeyState</span><span class="p">(</span><span class="mh">0x41</span><span class="p">);</span>
			<span class="n">system</span><span class="p">(</span><span class="s">"cls"</span><span class="p">);</span>
			<span class="k">break</span><span class="p">;</span>
		<span class="p">}</span>

		<span class="k">if</span> <span class="p">(</span><span class="n">GetKeyState</span><span class="p">(</span><span class="n">VK_UP</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">GetKeyState</span><span class="p">(</span><span class="n">VK_DOWN</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>

			<span class="n">system</span><span class="p">(</span><span class="s">"cls"</span><span class="p">);</span>
			<span class="n">SetConsoleCursorPosition</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span><span class="mi">0</span> <span class="p">});</span>
			<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">window</span><span class="p">;</span>
			<span class="n">SetConsoleCursorPosition</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="n">ptr</span><span class="p">);</span>
			<span class="n">putchar</span><span class="p">(</span><span class="sc">'&gt;'</span><span class="p">);</span>

			<span class="k">if</span> <span class="p">(</span><span class="n">GetKeyState</span><span class="p">(</span><span class="n">VK_UP</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
				<span class="n">GetKeyState</span><span class="p">(</span><span class="n">VK_UP</span><span class="p">);</span>
				<span class="k">if</span> <span class="p">(</span><span class="n">ptr</span><span class="p">.</span><span class="n">Y</span> <span class="o">&gt;</span> <span class="mi">4</span><span class="p">)</span> <span class="n">ptr</span><span class="p">.</span><span class="n">Y</span> <span class="o">-=</span> <span class="mi">1</span><span class="p">;</span>
				<span class="k">else</span> <span class="n">ptr</span><span class="p">.</span><span class="n">Y</span> <span class="o">=</span> <span class="mi">7</span><span class="p">;</span> 
				<span class="p">}</span>
			<span class="k">else</span> <span class="p">{</span>
				<span class="n">GetKeyState</span><span class="p">(</span><span class="n">VK_DOWN</span><span class="p">);</span>
				<span class="k">if</span> <span class="p">(</span><span class="n">ptr</span><span class="p">.</span><span class="n">Y</span> <span class="o">&lt;</span> <span class="mi">7</span><span class="p">)</span> <span class="n">ptr</span><span class="p">.</span><span class="n">Y</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
				<span class="k">else</span> <span class="n">ptr</span><span class="p">.</span><span class="n">Y</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
				<span class="p">}</span>
		<span class="p">}</span>

		<span class="k">switch</span> <span class="p">(</span><span class="n">ptr</span><span class="p">.</span><span class="n">Y</span><span class="o">-</span><span class="mi">4</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">case</span> <span class="mi">1</span><span class="p">:</span> <span class="n">system</span><span class="p">(</span><span class="n">scheme</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span> <span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="mi">2</span><span class="p">:</span> <span class="n">system</span><span class="p">(</span><span class="n">scheme</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span> <span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="mi">3</span><span class="p">:</span> <span class="n">system</span><span class="p">(</span><span class="n">scheme</span><span class="p">[</span><span class="mi">2</span><span class="p">]);</span> <span class="k">break</span><span class="p">;</span>
		<span class="k">case</span> <span class="mi">4</span><span class="p">:</span> <span class="n">system</span><span class="p">(</span><span class="n">scheme</span><span class="p">[</span><span class="mi">3</span><span class="p">]);</span> <span class="k">break</span><span class="p">;</span>
		<span class="nl">default:</span> <span class="k">break</span><span class="p">;</span>
		<span class="p">}</span>
	<span class="p">}</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="n">handle</span> <span class="o">=</span> <span class="n">GetStdHandle</span><span class="p">(</span><span class="n">STD_OUTPUT_HANDLE</span><span class="p">);</span>
	<span class="n">SetConsoleCursorInfo</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">null_cursor</span><span class="p">);</span>
	<span class="k">while</span> <span class="p">(</span><span class="nb">true</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"This is a main function provided for test, which prints random numeric unless manually stopped.</span><span class="se">\n</span><span class="s">To test the plug, please press A, or press ESC to quit the program.</span><span class="se">\n\n</span><span class="s">"</span><span class="p">;</span>

		<span class="k">if</span> <span class="p">(</span><span class="n">GetKeyState</span><span class="p">(</span><span class="mh">0x41</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">GetKeyState</span><span class="p">(</span><span class="mh">0x41</span><span class="p">);</span>
			<span class="n">plug</span><span class="p">();</span>
		<span class="p">}</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">GetKeyState</span><span class="p">(</span><span class="mh">0x1B</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
			<span class="n">GetKeyState</span><span class="p">(</span><span class="mh">0x1B</span><span class="p">);</span>
			<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">rand</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
		<span class="n">system</span><span class="p">(</span><span class="s">"cls"</span><span class="p">);</span>
	<span class="p">}</span>

	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Run the code above, you may get the consequence below:</p>

<p><img src="http://localhost:4000/assets/img/0x0000.png" alt="0x0000" align="center" /> <br />
<img src="http://localhost:4000/assets/img/0x0001.png" alt="0x0001" align="center" /></p>

<p>If you find something ridiculous in the 2nd image, you are totally right! The case above is my first edition, and of course, an edition of failure. A complex combination of several factors, not so readable sign and variable, with even constantly “shining” window case the <em>outstream</em> syntax is indeed scoped in a loop block!</p>

<p>Sounds like easy when the criticism done, un-huh? And what if told you are absolute wrong since the very beginning after a mess of checking the reference? That’s cruel, but it is true.</p>

<h2 id="restart-with-oop-thought-to-create-a-scheme">Restart with OOP Thought: To Create a <code class="highlighter-rouge">Scheme</code></h2>

<p>What if more schemes provided? What if a certain variable requires modification? All those questions strike directly towards the core mistake of the code: <strong>WHAT IT DESIGNED FOR?</strong></p>

<p>The tune is so synonymously with the so called OOP (Object Oriented Programming) thought, which exactly aims at achieve what the code itself is designed for. Let’s see, just take it an attempt. <strong>WHO</strong>’s the code designed for? <strong>WHAT</strong>’s the code designed for? And most importantly, (at least for developers) <strong>HOW</strong>’s the code designed?</p>

<p><strong>As long as the window provides several schemes, a SCHEME should be a basic variable, RATHER THAN any datum in the code.</strong> What a scheme is? It is an option, its function displayed in the window. It can be chosen or not, according whether there is a signal right to the scheme. For the invisible, it’s as well able to change the console color.</p>

<blockquote>
  <p>Note:<br />A scheme is a basic variable for our achievement, and the factors below should be included:<br />1. Display the scheme<br />2. Display the sign when chosen<br />3. Change the color of the scheme</p>
</blockquote>

<p>Let’s turn those concept into code achievement:</p>

<blockquote>
  <p>Note:<br />A scheme should involve the following datum and function:<br />1. a <code class="highlighter-rouge">const char []</code> or <code class="highlighter-rouge">const std::string</code> for display<br />2. different types of <code class="highlighter-rouge">const char *</code> or <code class="highlighter-rouge">const std::string</code> with signal or not to mark whether chosen<br />3. a <code class="highlighter-rouge">const char[]</code> for the function <code class="highlighter-rouge">void system(char *)</code> in order to change the console color<br />4. the function <code class="highlighter-rouge">void convert(void)</code> for instance to change the color and display the scheme when chosen<br />5. the function <code class="highlighter-rouge">void suspend(void)</code> for instance to display the scheme when not chosen</p>
</blockquote>

<p>‘cause we compile the code as a single-threaded program (at the same time, such a simple program do not deserve too much storage and memory) the program can only print a single unit of datum once, we have to change the cursor frequently in order to achieve the print of each scheme. Thus, the datum below are as well needed to reset the cursor:</p>

<blockquote>
  <p>Note:<br />5. <code class="highlighter-rouge">struct COORD { short X, short Y }</code><br />6. <code class="highlighter-rouge">HANDLE</code>. This is specified for Windows if the cursor position modified</p>
</blockquote>

<p>Finally, here we go a scheme, for every factor above included.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Header.h</span>

<span class="cp">#ifndef _HEADER_H_
#define _HEADER_H_
</span>
<span class="cp">#include &lt;iostream&gt;
#include &lt;Windows.h&gt;
#include &lt;string&gt;
</span>
<span class="kt">void</span> <span class="nf">plug</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="k">class</span> <span class="nc">Scheme</span> <span class="p">{</span>
<span class="nl">private:</span>
	<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">scheme_on</span><span class="p">;</span>
	<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">scheme_off</span><span class="p">;</span>
	<span class="n">COORD</span> <span class="n">position</span><span class="p">;</span>
	<span class="n">HANDLE</span> <span class="n">handle</span><span class="p">;</span>
	<span class="kt">char</span> <span class="n">syntax</span><span class="p">[</span><span class="mi">16</span><span class="p">];</span>
<span class="nl">public:</span>
	<span class="n">Scheme</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="o">*</span><span class="n">_scheme</span><span class="p">,</span> <span class="kt">short</span> <span class="n">X</span><span class="p">,</span> <span class="kt">short</span> <span class="n">Y</span><span class="p">,</span><span class="kt">char</span> <span class="n">background</span><span class="p">,</span><span class="kt">char</span> <span class="n">foreground</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">scheme_on</span> <span class="o">=</span> <span class="s">"-&gt; "</span> <span class="o">+</span> <span class="o">*</span><span class="n">_scheme</span><span class="p">;</span>
		<span class="n">scheme_off</span> <span class="o">=</span> <span class="s">"   "</span> <span class="o">+</span> <span class="o">*</span><span class="n">_scheme</span><span class="p">;</span>
		<span class="n">syntax</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="sc">'c'</span><span class="p">;</span> <span class="n">syntax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="sc">'o'</span><span class="p">;</span> <span class="n">syntax</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="sc">'l'</span><span class="p">;</span> <span class="n">syntax</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="sc">'o'</span><span class="p">;</span> <span class="n">syntax</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="sc">'r'</span><span class="p">;</span> <span class="n">syntax</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span> <span class="o">=</span> <span class="sc">'\0'</span><span class="p">;</span>
		<span class="n">syntax</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span> <span class="o">=</span> <span class="n">background</span><span class="p">;</span> <span class="n">syntax</span><span class="p">[</span><span class="mi">7</span><span class="p">]</span> <span class="o">=</span> <span class="n">foreground</span><span class="p">;</span>
		<span class="n">position</span> <span class="o">=</span> <span class="p">{</span><span class="n">X</span><span class="p">,</span><span class="n">Y</span><span class="p">};</span>
		<span class="n">handle</span> <span class="o">=</span> <span class="n">GetStdHandle</span><span class="p">(</span><span class="n">STD_OUTPUT_HANDLE</span><span class="p">);</span>
	<span class="p">}</span>
	<span class="n">Scheme</span><span class="p">()</span> <span class="p">{};</span>
	<span class="o">~</span><span class="n">Scheme</span><span class="p">()</span> <span class="p">{};</span>
	<span class="kt">void</span> <span class="n">convert</span><span class="p">()</span> <span class="p">{</span>
		<span class="n">system</span><span class="p">(</span><span class="n">syntax</span><span class="p">);</span>
		<span class="n">SetConsoleCursorPosition</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span><span class="n">position</span><span class="p">);</span>
		<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">scheme_on</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="kt">void</span> <span class="n">suspend</span><span class="p">()</span> <span class="p">{</span> 
		<span class="n">SetConsoleCursorPosition</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span><span class="n">position</span><span class="p">);</span>
		<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">scheme_off</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
	<span class="p">}</span>
<span class="p">};</span>
<span class="cp">#endif
</span></code></pre></div></div>

<p>Some factor supposed to be achieved at the same time, those factors are combined in one function. Some techniques as well deserve attention, such as assign <em>on</em> and <em>off</em> state scheme with just one argument in constructor, pass the pointer as parameter to save storage, etc.</p>

<h2 id="to-develop-a-plug-with-scheme">To Develop a <code class="highlighter-rouge">Plug</code> with <code class="highlighter-rouge">Scheme</code></h2>

<p>So much has changed so far, yet not the whole. More exactly, we have just redesigned the most underlying level of the task. Factually, logical branch framework keeps its value and we only need to change the code inside the logic branch framework, which even make the logic more clear.</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Source01.cpp</span>

<span class="cp">#include "Header.h"
#include &lt;stdio.h&gt;
#include &lt;string&gt;
#include &lt;Windows.h&gt;
</span>
<span class="kt">int</span> <span class="n">choice</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>		
<span class="k">enum</span> <span class="p">{</span><span class="n">TOTAL</span><span class="o">=</span><span class="mi">4</span><span class="p">};</span>
<span class="k">const</span> <span class="kt">short</span> <span class="n">BEGINNING</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>

<span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">scheme</span><span class="p">[</span><span class="n">TOTAL</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
	<span class="s">"white &amp; green"</span><span class="p">,</span>
	<span class="s">"red &amp; grey"</span><span class="p">,</span>
	<span class="s">"white &amp; black (default)"</span><span class="p">,</span>
	<span class="s">"while &amp; blue"</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="nf">plug</span><span class="p">()</span> <span class="p">{</span>
	<span class="n">system</span><span class="p">(</span><span class="s">"cls"</span><span class="p">);</span>

	<span class="n">Scheme</span> <span class="n">prescheme</span><span class="p">[</span><span class="n">TOTAL</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
		<span class="n">Scheme</span><span class="p">(</span><span class="o">&amp;</span><span class="n">scheme</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="sc">'7'</span><span class="p">,</span><span class="sc">'8'</span><span class="p">),</span>
		<span class="n">Scheme</span><span class="p">(</span><span class="o">&amp;</span><span class="n">scheme</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span><span class="mi">0</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="sc">'4'</span><span class="p">,</span><span class="sc">'8'</span><span class="p">),</span>
		<span class="n">Scheme</span><span class="p">(</span><span class="o">&amp;</span><span class="n">scheme</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span><span class="mi">0</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="sc">'7'</span><span class="p">,</span><span class="sc">'0'</span><span class="p">),</span>
		<span class="n">Scheme</span><span class="p">(</span><span class="o">&amp;</span><span class="n">scheme</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span><span class="mi">0</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="sc">'4'</span><span class="p">,</span><span class="sc">'1'</span><span class="p">)</span>
	<span class="p">};</span>

	<span class="n">printf</span><span class="p">(</span><span class="s">"-----------------------</span><span class="se">\n\n</span><span class="s"> Choose a color scheme</span><span class="se">\n\n</span><span class="s">"</span><span class="p">);</span>
	<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">TOTAL</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="n">choice</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="n">prescheme</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">convert</span><span class="p">();</span>
		<span class="k">else</span> <span class="n">prescheme</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">suspend</span><span class="p">();</span>
	<span class="p">}</span>
	<span class="n">printf</span><span class="p">(</span><span class="s">"</span><span class="se">\n</span><span class="s">   Press A to quit   </span><span class="se">\n\n</span><span class="s">  class edition v1.0   </span><span class="se">\n</span><span class="s">-----------------------</span><span class="se">\n</span><span class="s">"</span><span class="p">);</span>

	<span class="k">while</span> <span class="p">(</span><span class="nb">true</span><span class="p">)</span> <span class="p">{</span>

		<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">TOTAL</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="n">choice</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
				<span class="n">prescheme</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">convert</span><span class="p">();</span>
			<span class="p">}</span>
			<span class="k">else</span> <span class="n">prescheme</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">suspend</span><span class="p">();</span>
		<span class="p">}</span>

		
			<span class="k">if</span> <span class="p">(</span><span class="n">GetKeyState</span><span class="p">(</span><span class="n">VK_UP</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">GetKeyState</span><span class="p">(</span><span class="n">VK_DOWN</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">GetKeyState</span><span class="p">(</span><span class="mh">0x41</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>


				<span class="k">if</span> <span class="p">(</span><span class="n">GetKeyState</span><span class="p">(</span><span class="n">VK_UP</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
					<span class="n">GetKeyState</span><span class="p">(</span><span class="n">VK_UP</span><span class="p">);</span>
					<span class="k">if</span> <span class="p">(</span><span class="n">choice</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">)</span> <span class="n">choice</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
					<span class="k">else</span> <span class="n">choice</span> <span class="o">-=</span> <span class="mi">1</span><span class="p">;</span>
					
				<span class="p">}</span>
				<span class="k">if</span> <span class="p">(</span><span class="n">GetKeyState</span><span class="p">(</span><span class="n">VK_DOWN</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
					<span class="n">GetKeyState</span><span class="p">(</span><span class="n">VK_DOWN</span><span class="p">);</span>
					<span class="k">if</span> <span class="p">(</span><span class="n">choice</span> <span class="o">&gt;=</span> <span class="n">TOTAL</span><span class="p">)</span> <span class="n">choice</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
					<span class="k">else</span> <span class="n">choice</span> <span class="o">+=</span> <span class="mi">1</span><span class="p">;</span>
					
				<span class="p">}</span>
				<span class="k">if</span> <span class="p">(</span><span class="n">GetKeyState</span><span class="p">(</span><span class="mh">0x41</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span>
			<span class="p">}</span>
		
	<span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>The function <code class="highlighter-rouge">plug</code> aimed to work as a plug during <code class="highlighter-rouge">main</code>’s running. To avoid the “shining” problem, <code class="highlighter-rouge">plug</code> separates the logical branch which distinguish a key from other code blocks.</p>

<p>Everything’s done, why not find a function to test its function?</p>

<h2 id="practice-to-test-plug-in-main">Practice: to Test <code class="highlighter-rouge">plug</code> in <code class="highlighter-rouge">main</code></h2>

<p>Considering a main function below provide:</p>

<div class="language-cpp highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Source02.cpp</span>

<span class="cp">#include "Header.h"
#include &lt;Windows.h&gt;
#include &lt;iostream&gt;
</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
	<span class="c1">// the code just set the cursor invisible</span>
	<span class="c1">// with nothing to do with function</span>
	<span class="n">HANDLE</span> <span class="n">handle</span> <span class="o">=</span> <span class="n">GetStdHandle</span><span class="p">(</span><span class="n">STD_OUTPUT_HANDLE</span><span class="p">);</span>
	 <span class="n">CONSOLE_CURSOR_INFO</span> <span class="n">null_cursor</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">100</span><span class="p">,</span><span class="nb">false</span> <span class="p">};</span>
	 <span class="n">SetConsoleCursorInfo</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">null_cursor</span><span class="p">);</span> 

	<span class="k">while</span> <span class="p">(</span><span class="nb">true</span><span class="p">)</span> <span class="p">{</span>
		<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">"This is a main function provided for test, which prints random numeric unless manually stopped.</span><span class="se">\n</span><span class="s">"</span>
			<span class="s">"To test the plug, please press A, or press ESC to quit the program.</span><span class="se">\n\n</span><span class="s">"</span>
			<span class="s">"</span><span class="se">\n\n</span><span class="s">class plug v1.0   by Shaun Leo</span><span class="se">\n</span><span class="s">"</span><span class="p">;</span>

		<span class="k">while</span> <span class="p">(</span><span class="nb">true</span><span class="p">)</span> <span class="p">{</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">GetKeyState</span><span class="p">(</span><span class="mh">0x41</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
				<span class="c1">// GetKeyState(0x41);</span>
				<span class="n">plug</span><span class="p">();</span>
				<span class="n">system</span><span class="p">(</span><span class="s">"cls"</span><span class="p">);</span>
				<span class="k">break</span><span class="p">;</span>
			<span class="p">}</span>
			<span class="k">if</span> <span class="p">(</span><span class="n">GetKeyState</span><span class="p">(</span><span class="n">VK_ESCAPE</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span>
			<span class="n">SetConsoleCursorPosition</span><span class="p">(</span><span class="n">handle</span><span class="p">,</span> <span class="p">{</span> <span class="mi">0</span><span class="p">,</span><span class="mi">3</span> <span class="p">});</span>
			<span class="n">std</span><span class="o">::</span><span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">rand</span><span class="p">()</span> <span class="o">&lt;&lt;</span> <span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
		<span class="p">}</span>
		<span class="k">if</span> <span class="p">(</span><span class="n">GetKeyState</span><span class="p">(</span><span class="n">VK_ESCAPE</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span>
	<span class="p">}</span>
	<span class="c1">// SetConsoleCursorPosition(handle, { 0,6 });</span>
	<span class="c1">// system("pause");</span>
	<span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Compiler <code class="highlighter-rouge">Header.h</code>, <code class="highlighter-rouge">Source01.cpp</code> and <code class="highlighter-rouge">Source02.cpp</code> together, you will get the following consequence:</p>

<p><img src="http://localhost:4000/assets/img/0x0002.png" alt="0x0002" align="center" /> <br />
<img src="http://localhost:4000/assets/img/0x0003.png" alt="0x0003" align="center" /></p>

<p>Everything well done so far.</p>

          </article>
          <hr class="boundary">
          <div id="post-share" class="bdsharebuttonbox">
              <a href="#" class="bds_more" data-cmd="more"></a>
              <a href="#" class="bds_tsina" data-cmd="tsina" title="分享到新浪微博"></a>
              <a href="#" class="bds_weixin" data-cmd="weixin" title="分享到微信"></a>
              <a href="#" class="bds_douban" data-cmd="douban" title="分享到豆瓣网"></a>
              <a href="#" class="bds_fbook" data-cmd="fbook" title="分享到Facebook"></a>
              <a href="#" class="bds_copy" data-cmd="copy" title="分享到复制网址"></a>
          </div>
        </div>
        <div class="pad-min"></div>
        <div id="post-comment" class="sheet post hidden">
            <div id="disqus_thread"></div>
        </div>
    </div>
    <div class="content-navigation col-lg-3">
      <div class="shadow-bottom-center" >
        <div class="content-navigation-toc">
            <div class="content-navigation-header">
                <span class="octicon octicon-list-unordered"></span>&nbsp;Toc
            </div>
            <div class="content-navigation-list toc"></div>
        </div>
        <div class="content-navigation-tag">
            <div class="content-navigation-header">
                <span class="octicon octicon-list-unordered"></span>&nbsp;Tags
            </div>
            <div class="content-navigation-list">
                <ul>
                    
                    <li>
                        <a href="http://localhost:4000/tags#Windows"><span class="octicon octicon-tag"></span>&nbsp;Windows</a>
                    </li>
                    
                    <li>
                        <a href="http://localhost:4000/tags#cmd"><span class="octicon octicon-tag"></span>&nbsp;cmd</a>
                    </li>
                    
                    <li>
                        <a href="http://localhost:4000/tags#C++"><span class="octicon octicon-tag"></span>&nbsp;C++</a>
                    </li>
                    
                    <li>
                        <a href="http://localhost:4000/tags#code"><span class="octicon octicon-tag"></span>&nbsp;code</a>
                    </li>
                    
                    <li>
                        <a href="http://localhost:4000/tags#homework"><span class="octicon octicon-tag"></span>&nbsp;homework</a>
                    </li>
                    
                </ul>
            </div>
        </div>
        <div class="content-navigation-related">
            <div class="content-navigation-header">
                <span class="octicon octicon-list-unordered"></span>&nbsp;Related
            </div>
            <div class="content-navigation-list">
                <ul>
                    

                    

                    
                        
                            <li>
                                <a href="http://localhost:4000/python/python-graphical/">Python Graphicalization of Encapsulated Module</a>
                            </li>
                        
                            <li>
                                <a href="http://localhost:4000/python/python-worm/">python worm</a>
                            </li>
                        
                            <li>
                                <a href="http://localhost:4000/c++/Homework-first/">Notation for the first homework</a>
                            </li>
                        
                    
                </ul>
            </div>
        </div>
      </div>
    </div>
</div>
    </div>
    <div class="page-scrollTop" data-toggle="tooltip" data-placement="top" title="Top">
        <a href="javascript:void(0);">
            <div class="arrow"></div>
            <div class="stick"></div>
        </a>
    </div>
</div>

    <footer  class="footnote footnote-tiffany">
        <div class="container">
                <a class="foot-item" href="mailto:tamakazarishino@icloud.com" target="_blank"><span class="octicon octicon-mail"></span></a>
                <a class="foot-item" href="https://github.com/riumin" target="_blank"><span class="octicon octicon-mark-github"></span></a>
                <a class="foot-item" href="http://localhost:4000/feed.xml" target="_blank"><span class="octicon octicon-rss"></span></a>
                <a class="foot-item" href="http://localhost:4000/link/"><span class="octicon octicon-link-external"></span></a>
                &nbsp;
                <a href="https://github.com/bit-ranger"><span class="word-keep">Original designed by bit-ranger, appreciation.<a src=""></a></span></a>
        </div>
    </footer>
    <script type="text/javascript" src="https://cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdn.bootcss.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="http://localhost:4000/static/js/script.js"></script>
    <script type="text/javascript" src="http://localhost:4000/static/js/gitment.js"></script>
    <script type="text/javascript" src="http://localhost:4000/static/js/post.js"></script>
    

<!-- d3 function plot cdn-->
    <script src="https://unpkg.com/d3@3/d3.min.js"></script>
    <script src="https://unpkg.com/function-plot@1/dist/function-plot.js"></script>

        <!-- katex-element works as the supplenment of katex im remote CDN, the plugin stored in repository-->
        <script src="https://riumin.github.io/blogEspresso/plugins/katex-element-master/dist/katex-element.umd.js" type="module"></script>

        <!-- here store katex from cdn to repo and redirect the address to repo on July 24, 2019-->
        <link rel="stylesheet" href="https://riumin.github.io/blogEspresso/plugins/katex@0.10.2/dist/katex.css" integrity="sha384-yFRtMMDnQtDRO8rLpMIKrtPCD5jdktao2TV19YiZYWMDkUR5GQZR/NOVTdquEx1j" crossorigin="anonymous">
            <!-- The loading of KaTeX is deferred to speed up page rendering -->
        <script defer src="https://riumin.github.io/blogEspresso/plugins/katex@0.10.2/dist/katex.js" integrity="sha384-9Nhn55MVVN0/4OFx7EE5kpFBPsEMZxKTCnA+4fqDmg12eCTqGi6+BB2LjY8brQxJ" crossorigin="anonymous"></script>
            <!-- To automatically render math in text elements, include the auto-render extension: -->
        <script defer src="https://riumin.github.io/blogEspresso/plugins/katex@0.10.2/dist/contrib/auto-render.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>
    
        <!-- here store mermaid from cdn into repo and redirect the address to repo on July 22, 2019 -->
        <script src="https://riumin.github.io/blogEspresso/plugins/mermaid@7.1.0/dist/mermaid.js"></script>
    
        <!-- algolia cdn -->
        <script src="https://cdn.jsdelivr.net/algoliasearch/3/algoliasearch.min.js"></script>
</body>

</html>
